var tribe_events_pro_admin={event:{}};!function(e,t){t.init=function(){function t(e){var t=Date.now(),s=t-u;e.html&&c.html(e.html),e.progress&&i(e.progress,e.progressText),e["continue"]&&(s<500?setTimeout(n,500-s):n()),e.complete&&(a.replaceWith(TribeEventsProRecurrenceUpdate.completeMsg),c.removeClass("updating").addClass("completed"),setTimeout(r,1e3))}function n(){var n={event:TribeEventsProRecurrenceUpdate.eventID,check:TribeEventsProRecurrenceUpdate.check,action:"tribe_events_pro_recurrence_realtime_update"};e.post(ajaxurl,n,t,"json")}function i(e,t){e=parseInt(e),e<0||e>100||(d.css("width",e+"%"),o.attr("title",t))}function r(){var e={opacity:0,height:"toggle"};c.animate(e,1e3,function(){c.remove()})}function s(){n(),i(TribeEventsProRecurrenceUpdate.progress,TribeEventsProRecurrenceUpdate.progressText)}if(this.init_settings(),e("#event_venue input, #event_venue select").change(function(){var t=e("#saved_venue option:selected");if(0===t.val()){var n=e(this).closest("form"),i=n.find('[name="venue[Address]"]').val(),r=n.find('[name="venue[City]"]').val(),s=n.find('[name="venue[Country]"]').val(),c="US"===n.find('[name="venue[Country]"] option:selected').val()?n.find('[name="venue[State]"]').val():n.find('[name="venue[Province]"]').val(),a=n.find('[name="venue[Zip]"]').val(),o=i+","+r+","+c+","+s+","+a;"function"==typeof codeAddress&&codeAddress(o)}else"function"==typeof codeAddress&&codeAddress(t.data("address"))}),e("#doaction, #doaction2").click(function(t){var n=e(this).attr("id").substr(2);if("edit"===e('select[name="'+n+'"]').val()&&"tribe_events"===e(".post_type_page").val()){t.preventDefault();var i=[];e("#bulk-titles div").each(function(){var t=e(this).attr("id"),n=t.replace("ttle",""),r=e("#post-"+n+" .row-title").first().text(),s=e("<div/>").append(e(this).find("a"));e(this).html("").append(s).append(r),i[t]&&e(this).remove(),i[t]=!0})}}),e("body").on("click",".ui-dialog-titlebar .ui-dialog-titlebar-close",function(){tribe_events_pro_admin.reset_submit_button()}),e('input[name="post[]"]').click(function(){var t=e(this).val();e(this).is(":checked")?e('input[name="post[]"][value="'+t+'"]').prop("checked",!0):e('input[name="post[]"][value="'+t+'"]').prop("checked",!1)}),e(".wp-list-table.posts").on("click",".tribe-split",function(){var t="";if(t=e(this).hasClass("tribe-split-all")?TribeEventsProAdmin.recurrence.splitAllMessage:TribeEventsProAdmin.recurrence.splitSingleMessage,!window.confirm(t))return!1}),e(".wp-admin.events-cal.edit-php #doaction").click(function(t){"trash"===e('[name="action"] option:selected').val()&&e('.tribe-recurring-event-parent [name="post[]"]:checked').length>0&&!confirm(TribeEventsProAdmin.recurrence.bulkDeleteConfirmationMessage)&&t.preventDefault()}),"object"==typeof TribeEventsProRecurrenceUpdate){var c=e("div.tribe-events-recurring-update-msg"),a=c.find("img"),o=c.find("div.progress"),d=c.find("div.bar"),u=Date.now();setTimeout(s)}},t.init_settings=function(){var t=e('[name="hideSubsequentRecurrencesDefault"]'),n=e('[name="userToggleSubsequentRecurrences"]');if(t.length&&n.length){var i=e("#tribe-field-userToggleSubsequentRecurrences");t.is(":checked")&&(n.prop("checked",!1),i.hide()),t.on("click",function(){var t=e(this);t.is(":checked")?(n.prop("checked",!1),i.hide()):i.show()})}},e(function(){t.init()})}(jQuery,tribe_events_pro_admin);