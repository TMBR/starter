jQuery(document).ready(function(i){function a(){var a=i(".tribe-mini-calendar-wrapper");if(i(".tribe-mini-calendar-wrapper.layout-wide").length&&i(".tribe-mini-calendar-right").length){var e=i(".tribe-mini-calendar-right"),n=a.height(),t=e.outerHeight();t+=20,t>n?a.css("height",t+"px"):a.css("height","auto")}else i(".tribe-mini-calendar-wrapper.layout-wide").length&&a.css("height","auto")}function e(i){var a=i.closest(".tribe-mini-calendar");a.find(".tribe-events-thismonth,.tribe-events-othermonth").removeClass("tribe-mini-calendar-today"),i.parents(".tribe-events-has-events").addClass("tribe-mini-calendar-today")}var n=i(".tribe-mini-calendar-wrapper").parent();a();var t=new Date,r=t.getDate().toString(),l=(t.getMonth()+1).toString(),s=t.getFullYear().toString(),c=s+"-"+(l[1]?l:"0"+l[0])+"-"+(r[1]?r:"0"+r[0]),d=c.slice(0,7);n.on("click",".tribe-mini-calendar-nav-link",function(e){e.preventDefault();var n=i(this),t=n.closest(".tribe-mini-calendar"),r=n.closest(".tribe-mini-calendar-wrapper"),l=n.attr("data-month"),s=l.slice(0,7);d==s&&(l=c);var o={action:"tribe-mini-cal",eventDate:l,count:t.data("count"),tax_query:t.data("tax-query"),nonce:t.data("nonce")};t.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),i.post(TribeMiniCalendar.ajaxurl,o,function(e){if(t.find(".tribe-mini-calendar-list-wrapper").remove(),e.success){var n=i.parseHTML(e.html);t.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),r.replaceWith(n),a()}})}).on("click",".tribe-mini-calendar-day-link",function(n){n.preventDefault();var t=i(this),r=t.attr("data-day"),l=t.text(),s=t.closest(".tribe-mini-calendar"),c=s.parent().siblings(".tribe-mini-calendar-list-wrapper");i("h2.tribe-mini-calendar-title").text(i("#tribe-mini-calendar-month-name").val()+" "+l+" Events"),e(t);var d={action:"tribe-mini-cal-day",eventDate:r,count:s.data("count"),tax_query:s.data("tax-query"),nonce:s.data("nonce")};s.find(".tribe-mini-calendar-nav div > span").addClass("active").siblings("#ajax-loading-mini").show(),i.post(TribeMiniCalendar.ajaxurl,d,function(e){if(e.success){var n="";n=i.isFunction(i.fn.parseHTML)?i.parseHTML(e.html):e.html,s.find(".tribe-mini-calendar-nav div > span").removeClass("active").siblings("#ajax-loading-mini").hide(),c.replaceWith(n),a()}})})});